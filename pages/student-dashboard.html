<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bảng Điều Khiển Học Sinh - Kid Games</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="student-dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">
                <img src="../images/KidGames-logo.jpg" alt="Kid Games Logo">
                <span class="logo-text">KidGames: Trò chơi giáo dục dành cho học sinh lớp 1</span>
            </div>
            <div class="nav-links">
                <a href="#" class="active">Bảng điều khiển</a>
                <div class="notification-dropdown">
                    <a href="#" class="notification-btn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">0</span>
                    </a>
                    <div class="notification-content">
                        <div class="notification-header">
                            <h3>Thông báo</h3>
                            <button class="mark-all-read">Đánh dấu đã đọc</button>
                        </div>
                        <div class="notification-list">
                            <!-- Thông báo sẽ được thêm vào đây bằng JavaScript -->
                        </div>
                    </div>
                </div>
                <div class="profile-dropdown">
                    <a href="#" class="profile-btn"><i class="fas fa-user"></i></a>
                    <div class="dropdown-content">
                        <a href="#" id="view-profile-btn"><i class="fas fa-user-circle"></i> Thông tin cá nhân</a>
                        <a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="dashboard-container">
        <div class="dashboard-sidebar">
            <div class="user-info">
                <h2>
                    <span id="user-name"></span>
                    <span id="user-role"> (Học sinh) </span>
                    <span class="level-badge"><i class="fas fa-level-up-alt"></i> Cấp  <span id="user-level"></span></span>
                </h2>
                <p id="user-class"></p>
                <div class="user-stats">
                    <div class="user-stat">
                        <i class="fas fa-fire"></i>
                        <span><strong id="user-streak"></strong></span>
                    </div>
                    <div class="user-stat">
                        <i class="fas fa-gem"></i>
                        <span><strong id="user-diamond"></strong></span>
                    </div>
                </div>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="active"><i class="fas fa-home"></i> Tổng quan</a>
                <a href="#"><i class="fas fa-trophy"></i> Thành Tích</a>
                <a href="#"><i class="fas fa-chart-line"></i> Tiến Độ</a>
                <a href="#"><i class="fas fa-medal"></i> Bảng xếp hạng</a>
                <a href="#"><i class="fas fa-cog"></i> Cài Đặt</a>
            </nav>
        </div>

        <div class="dashboard-content">
            <!-- Section Tổng quan -->
            <div class="overview-section">
                <div class="overview-grid">
                    <div class="overview-card" data-section="achievements">
                        <div class="overview-icon"><i class="fas fa-trophy"></i></div>
                        <div>
                            <div class="overview-value"><span id="user-achievements"></span></div>
                            <div class="overview-label">Thành tích</div>
                        </div>
                    </div>
                    <div class="overview-card" data-section="progress">
                        <div class="overview-icon"><i class="fas fa-chart-line"></i></div>
                        <div>
                            <div class="overview-value"><span id="user-progress"></span></div>
                            <div class="overview-label">Tiến độ học tập</div>
                        </div>
                    </div>
                    <div class="overview-card" data-section="leaderboard">
                        <div class="overview-icon"><i class="fas fa-medal"></i></div>
                        <div>
                            <div class="overview-value"><span id="user-rank"></span></div>
                            <div class="overview-label">Xếp hạng</div>
                        </div>
                    </div>
                    <div class="overview-card" data-section="learningTime">
                        <div class="overview-icon"><i class="fas fa-clock"></i></div>
                        <div>
                            <div class="overview-value"><span id="user-totalLearningTime"></span></div>
                            <div class="overview-label">Phút học</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="welcome-banner">
                <h1>Chào mừng trở lại!</h1>
                <p>Hãy tiếp tục phấn đấu để đạt được nhiều thành tích hơn nhé!</p>
            </div>
            
            <div class="quick-actions">
                <button id="join-class-btn" class="action-btn">
                    <i class="fas fa-plus-circle"></i>
                    Tham gia lớp học
                </button>
                <button id="manage-parents-btn" class="action-btn">
                    <i class="fas fa-users"></i>
                    Quản lý phụ huynh
                </button>
            </div>
            <div class="achievements-section">
                <h2>Thành tích của em</h2>
                <div class="achievements-grid">
                </div>
            </div>
            <div class="my-class-section">
                <h2>Lớp học của tôi</h2>
                <div id="my-class-info">
                    <!-- Thông tin lớp sẽ được render ở đây -->
                </div>
            </div>
            <!-- Tabs -->
            <div class="dashboard-tabs">
                <button class="tab-btn active" data-tab="progress">Tiến độ học tập</button>
                <button class="tab-btn" data-tab="activity">Nhật ký hoạt động</button>
            </div>

            <!-- Tab content: Tiến độ học tập -->
            <div class="tab-content tab-progress active">
                <div class="progress-section">
                    <h2>Tiến độ học tập</h2>
                    <div class="progress-tree"></div>
                </div>
            </div>

            <!-- Tab content: Nhật ký hoạt động -->
            <div class="tab-content tab-activity">
                <div class="activity-section">
                    <h2>Nhật ký hoạt động</h2>
                    <div class="activity-header">
                        <div class="activity-filters">
                            <select>
                                <option>Tất cả thời gian</option>
                                <option>7 ngày qua</option>
                                <option>30 ngày qua</option>
                            </select>
                            <select>
                                <option>Tất cả hoạt động</option>
                                <option>Học tập</option>
                                <option>Luyện tập</option>
                            </select>
                        </div>
                        <div class="activity-summary">
                            <span><strong>5</strong> phút bài tập</span>
                            <span style="margin: 0 10px;">|</span>
                            <span><strong>10</strong> tổng số phút học</span>
                        </div>
                    </div>
                    <div class="activity-table-wrapper">    
                        <table class="activity-table">
                            <thead>
                                <tr>
                                    <th>HOẠT ĐỘNG</th>
                                    <th>NGÀY</th>
                                    <th>SỐ CÂU ĐÚNG/TỔNG SỐ CÂU</th>
                                    <th>LỖI SAI</th>
                                    <th>THỜI GIAN (PHÚT)</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="leaderboard-section" style="display: none;">
                <h2>Bảng xếp hạng</h2>
                <div class="leaderboard-header">
                    <div class="leaderboard-filters">
                        <select>
                            <option>Sắp xếp theo thời gian học</option>
                            <option>Sắp xếp theo kim cương</option>
                        </select>
                    </div>
                </div>
                <div class="leaderboard-table-wrapper">
                    <table class="leaderboard-table">
                        <thead>
                            <tr>
                                <th>Xếp hạng</th>
                                <th>Họ và tên</th>
                                <th>Lớp</th>
                                <th>Cấp độ</th>
                                <th>Thời gian học</th>
                                <th>Kim cương</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Danh sách xếp hạng sẽ được thêm vào đây bằng JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="settings-section" id="settings-section">
                <h2>Cài Đặt</h2>
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3><i class="fas fa-bell"></i> Tùy Chỉnh Thông Báo</h3>
                        <div class="settings-content">
                            <div class="setting-item">
                                <label>Thông báo chung</label>
                                <label class="switch">
                                    <input type="checkbox" id="notifications" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>Cập nhật tiến độ</label>
                                <label class="switch">
                                    <input type="checkbox" id="progress_updates" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>Thành tích</label>
                                <label class="switch">
                                    <input type="checkbox" id="achievements" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <label>Thông báo lớp học</label>
                                <label class="switch">
                                    <input type="checkbox" id="class_announcements" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Thêm các modal -->
    <!-- Modal Tham gia lớp học -->
    <div id="join-class-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Tham gia lớp học</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="join-class-form">
                    <div class="form-group">
                        <label for="class-code">Mã lớp học</label>
                        <input type="text" id="class-code" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-primary">Tham gia</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal Quản lý phụ huynh -->
    <div id="manage-parents-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Quản lý phụ huynh</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="add-parent-section">
                    <h3>Thêm phụ huynh</h3>
                    <form id="add-parent-form">
                        <div class="form-group">
                            <label for="parent-email">Email phụ huynh</label>
                            <input type="email" id="parent-email" required>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn-primary">Thêm</button>
                        </div>
                    </form>
                </div>
                <div class="parents-list">
                    <h3>Danh sách phụ huynh</h3>
                    <div class="parents-table-wrapper">
                        <table class="parents-table">
                            <thead>
                                <tr>
                                    <th>Tên phụ huynh</th>
                                    <th>Email</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Danh sách phụ huynh sẽ được thêm vào đây bằng JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore-compat.js"></script>
    <script src="../../firebase-config.js"></script>
    <script src="student-dashboard.js"></script>
</body>
</html> 